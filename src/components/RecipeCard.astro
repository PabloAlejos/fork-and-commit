---
// Props interface
interface Props {
	title: string;
	slug: string;
	category: string;
	totalTime: string;
	difficulty: string;
	servings: number;
	tags?: string[];
}

const {
	title,
	slug,
	category,
	totalTime,
	difficulty,
	servings,
	tags = []
} = Astro.props;
---

<a href={`${import.meta.env.BASE_URL.replace(/\/?$/, '/')}recipes/${slug}`} class="recipe-card">
	<article>
		<div class="card-header">
			<h2>{title}</h2>
			<span class="category">{category}</span>
		</div>

		<div class="card-meta">
			<span class="meta-item">
				<svg class="icon" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
					<circle cx="10" cy="10" r="8" />
					<path d="M10 5.5V10l3 2" />
				</svg>
				{totalTime}
			</span>
			<span class="meta-item">
				<svg class="icon" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
					<path d="M10 2c-.5 2-2.5 3.5-2.5 6a2.5 2.5 0 005 0C12.5 5.5 10.5 4 10 2z" />
					<path d="M7 14c0 1.7 1.3 3 3 3s3-1.3 3-3" />
				</svg>
				{difficulty}
			</span>
			<span class="meta-item">
				<svg class="icon" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
					<circle cx="10" cy="10" r="7" />
					<path d="M7 13c0-1 1-2.5 3-2.5s3 1.5 3 2.5" />
					<line x1="10" y1="4" x2="10" y2="7" />
					<line x1="6" y1="7.5" x2="8" y2="9" />
					<line x1="14" y1="7.5" x2="12" y2="9" />
				</svg>
				{servings} pers.
			</span>
		</div>

		{tags && tags.length > 0 && (
			<div class="tags">
				{tags.slice(0, 3).map(tag => (
					<button class="tag tag-clickable" data-tag={tag}>{tag}</button>
				))}
				{tags.length > 3 && (
					<span class="tag-more">+{tags.length - 3}</span>
				)}
			</div>
		)}
	</article>
</a>

<style>
	/* Recipe card */
	.recipe-card {
		display: block;
		text-decoration: none;
		color: inherit;
		background: var(--flour);
		border-radius: 8px;
		box-shadow: 0 2px 8px var(--shadow);
		transition: box-shadow 0.25s ease;
		overflow: hidden;
	}

	.recipe-card:hover {
		box-shadow: 0 4px 16px var(--shadow-card-hover);
	}

	.recipe-card article {
		padding: 1.5rem;
	}

	/* Card header */
	.card-header {
		margin-bottom: 1rem;
	}

	.card-header h2 {
		font-family: 'Space Grotesk', sans-serif;
		font-size: 1.25rem;
		margin-bottom: 0.5rem;
		color: var(--cast-iron);
		line-height: 1.3;
	}

	.category {
		display: inline-block;
		background-color: var(--coral);
		color: white;
		padding: 0.25rem 0.75rem;
		border-radius: 4px;
		font-size: 0.7rem;
		font-weight: 500;
		text-transform: uppercase;
		letter-spacing: 0.5px;
		font-family: 'JetBrains Mono', monospace;
	}

	/* Card meta */
	.card-meta {
		display: flex;
		gap: 1rem;
		flex-wrap: wrap;
		margin-bottom: 1rem;
		padding-bottom: 1rem;
		border-bottom: 1px solid var(--simmer);
	}

	.meta-item {
		display: flex;
		align-items: center;
		gap: 0.35rem;
		color: var(--graphite);
		font-size: 0.85rem;
	}

	.icon {
		width: 16px;
		height: 16px;
		flex-shrink: 0;
	}

	/* Tags */
	.tags {
		display: flex;
		gap: 0.5rem;
		flex-wrap: wrap;
	}

	/* Responsive */
	@media (max-width: 640px) {
		.recipe-card article {
			padding: 1.25rem;
		}
	}
</style>
